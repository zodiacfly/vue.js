<!DOCTYPE html>
<html>
<head>
	<title>products list</title>
	<script src="./lib/vue.js"></script>
	<link rel="stylesheet" type="text/css" href="./lib/bootstrap.css">
</head>
<body>
	<div id="app">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">Our product</h3>
			</div>
			<div class="panel-body form-inline">
				<label>
					Id :
					<input type="text" class="form-control" v-model="id">
				</label>

				<label>
					Name :
					<input type="text" class="form-control" v-model="name">
				</label>

				<input type="button" value="add" class="btn btn-primary" @click="add()">

				<label>
					searchï¼š
					<input type="text" class="form-control" v-model="keywords">
				</label>
			</div>
		</div>

		<table class="table table-bordered table-hover table-striped">
			<thead>
				<tr>
					<th>Id</th>
					<th>Name</th>
					<th>Create</th>
					<th>Operation</th>
				</tr>
			</thead>
			<tbody>
				<tr v-for="item in search(keywords)" :key='item.id'>
					<td>{{ item.id }}</td>
					<td>{{ item.name }}</td>
					<td>{{ item.time }}</td>
					<td><a href="" @click.prevent="del(item.id)">Delete</a></td>
				</tr>
			</tbody>
		</table>
	</div>

	<script>
		var vm = new Vue({
			el : '#app',
			data : {
				id : '',
				name : '',
				keywords : '',
				list : [
					{id : 1, name : 'BMW', time : new Date().toDateString()},
					{id : 2, name : 'Toyota', time : new Date().toDateString()},
					{id : 3, name : 'Audi', time : new Date().toDateString()}
				]
			},
			methods : {
				add : function(){
					var newProduct = {id : this.id, name : this.name, time : new Date().toDateString()}
					this.list.push(newProduct)
					this.id = this.name = ''
				},
				del : function(id){
					var index = this.list.findIndex(function(item){
						return item.id === id
					})
					this.list.splice(index,1)
				},
				search :function(keywords){
					// var newList = []
					// this.list.forEach(function(item){
					// 	if(item.name.toLowerCase().indexOf(keywords.toLowerCase()) != -1){
					// 		newList.push(item)
					// 	}
					// })
					// return newList
					// another method with ES6-----------------------------------------------
					return this.list.filter(function(item){
						return item.name.toLowerCase().includes(keywords.toLowerCase())
					})
				}
			}
		})
	</script>
</body>
</html>